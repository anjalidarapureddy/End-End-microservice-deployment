apiVersion: v1
kind: ConfigMap
metadata:
  name: kong-config
  namespace: app-dev
data:
  kong.yml: |-
    _format_version: "2.1"

    services:
      - name: auth-service
        url: http://auth-service:8000
        routes:
          - name: auth-route
            paths: ["/api/auth"]

      - name: user-service
        url: http://user-service:8000
        routes:
          - name: user-route
            paths: ["/api/users"]

      - name: order-service
        url: http://order-service:8000
        routes:
          - name: order-route
            paths: ["/api/orders"]

      - name: payment-service
        url: http://payment-service:8000
        routes:
          - name: payment-route
            paths: ["/api/payments"]

      - name: product-service
        url: http://product-service:8000
        routes:
          - name: product-route
            paths: ["/api/products"]

      - name: notification-service
        url: http://notification-service:8000
        routes:
          - name: notification-route
            paths: ["/api/notifications"]

      - name: analytics-service
        url: http://analytics-service:8000
        routes:
          - name: analytics-route
            paths: ["/api/analytics"]

# Apply with:
# kubectl apply -f kong-configmap.yaml -n app-dev
# Then restart Kong to pick up the config: kubectl rollout restart deployment/api-gateway -n app-dev